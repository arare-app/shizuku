{"version":3,"sources":["../src/hooks/native.ts","../src/character/bondage.ts","../src/rooms/asylum-ggts.ts","../src/entry.ts","../src/index.ts"],"sourcesContent":["import { ModSDKGlobalAPI } from 'bondage-club-mod-sdk'\n\ndeclare global {\n  interface Window {\n    bcModSdk: ModSDKGlobalAPI\n  }\n}\n\nexport const version = '0.0.7'\n\nexport default window.bcModSdk.registerMod({\n  name: 'Shizuku',\n  version,\n  fullName: 'Shizuku Bondage Club Mod',\n  repository: 'https://github.com/arare-app/shizuku',\n})\n","import modApi from '../hooks/native'\n\ndeclare global {\n  interface Window {\n    DialogShibariRandomBondage: () => void\n    DialogReleaseNoLock: () => void\n    DialogReleaseTotal: () => void\n  }\n}\n\nwindow.DialogShibariRandomBondage ??= function () {\n  ShibariRandomBondage(Player, Math.floor(Math.random() * 6))\n}\nwindow.DialogReleaseNoLock ??= function () {\n  CharacterReleaseNoLock(CurrentCharacter)\n}\nwindow.DialogReleaseTotal ??= function () {\n  CharacterReleaseTotal(CurrentCharacter)\n}\n\nfunction addCustomDialogToPlayer() {\n  const customDialog: DialogLine[] = [\n    {\n      Stage: '0',\n      Option: '(Cheat: Quick Bondage Menu)',\n      Function: null,\n      NextStage: 'ShizukuDialogCheatQuickBondageMenu',\n      Group: null,\n      Prerequisite: null,\n      Result: '(You can restrain or release yourself with a single click.)',\n      Trait: null,\n    },\n    {\n      Stage: 'ShizukuDialogCheatQuickBondageMenu',\n      Option: '(Remove Restrains Not Locked)',\n      Function: 'DialogReleaseNoLock()',\n      NextStage: '0',\n      Group: null,\n      Prerequisite: 'CurrentCharacter.IsRestrained()',\n      Result: '(You have been released except for locked items.)',\n      Trait: null,\n    },\n    {\n      Stage: 'ShizukuDialogCheatQuickBondageMenu',\n      Option: '(Remove All Restrains Except Collars)',\n      Function: 'DialogReleaseTotal()',\n      NextStage: '0',\n      Group: null,\n      Prerequisite: 'CurrentCharacter.IsRestrained()',\n      Result: '(You have been released except for slave collars.)',\n      Trait: null,\n    },\n    {\n      Stage: 'ShizukuDialogCheatQuickBondageMenu',\n      Option: '(Remove All Restrains)',\n      Function: 'DialogRelease()',\n      NextStage: '0',\n      Group: null,\n      Prerequisite: 'CurrentCharacter.IsRestrained()',\n      Result: '(You have been released.)',\n      Trait: null,\n    },\n    {\n      Stage: 'ShizukuDialogCheatQuickBondageMenu',\n      Option: '(Apply Random Bondage)',\n      Function: 'DialogFullRandomRestrain(Player)',\n      NextStage: '0',\n      Group: null,\n      Prerequisite: '!CurrentCharacter.IsRestrained()',\n      Result: '(You have been restrained.)',\n      Trait: null,\n    },\n    {\n      Stage: 'ShizukuDialogCheatQuickBondageMenu',\n      Option: '(Apply Random Shibari)',\n      Function: 'DialogShibariRandomBondage()',\n      NextStage: '0',\n      Group: null,\n      Prerequisite: '!CurrentCharacter.IsRestrained()',\n      Result: '(You have been restrained with Hemp Rope.)',\n      Trait: null,\n    },\n    {\n      Stage: 'ShizukuDialogCheatQuickBondageMenu',\n      Option: '(Back to main menu.)',\n      Function: null,\n      NextStage: '0',\n      Group: null,\n      Prerequisite: null,\n      Result: '(Main menu.)',\n      Trait: null,\n    },\n  ]\n  const lastIndex = Player.Dialog.findIndex((dialog) => dialog.Stage === '0' && dialog.Option === '(Leave this menu.)')\n  for (let i = 0; i < customDialog.length; i++) {\n    if (\n      Player.Dialog.some(\n        (dialog) =>\n          dialog.Stage == customDialog[i].Stage &&\n          dialog.Option === customDialog[i].Option &&\n          dialog.Function === customDialog[i].Function &&\n          dialog.NextStage === customDialog[i].NextStage &&\n          dialog.Group === customDialog[i].Group &&\n          dialog.Prerequisite === customDialog[i].Prerequisite &&\n          dialog.Result === customDialog[i].Result &&\n          dialog.Trait === customDialog[i].Trait,\n      )\n    )\n      continue\n    Player.Dialog.splice(lastIndex + i, 0, customDialog[i])\n  }\n}\n\nfunction init() {\n  // Add to player dialog when it's ready\n  modApi.hookFunction('DialogDraw', 10, (args, next) => {\n    // Early return if the current character is not the player.\n    if (!CharacterGetCurrent().IsPlayer()) return next(args)\n\n    addCustomDialogToPlayer()\n    return next(args)\n  })\n}\n\ninit()\n","import modApi from '../hooks/native'\n\ndeclare global {\n  interface Window {\n    DialogShizukuGGTSIsGGTS: () => boolean\n    DialogShizukuGGTSNoCurrentTask: () => boolean\n    DialogShizukuGGTSHasCurrentTask: () => boolean\n    DialogShizukuGGTSDoRequiredTask: () => void\n    DialogShizukuGGTSEnabledAutoDoRequiredTask: boolean\n    DialogShizukuGGTSAutoDoRequiredTask: () => void\n    DialogShizukuGGTSDisableAutoDoRequiredTask: () => void\n  }\n}\n\nexport function isGGTS() {\n  return (\n    CurrentModule == 'Online' && CurrentScreen == 'ChatRoom' && ChatRoomGame == 'GGTS' && ChatRoomSpace === 'Asylum'\n  )\n}\n\nfunction addCustomDialogToPlayer() {\n  const customDialog = [\n    {\n      Stage: '0',\n      Option: '(Cheat: GGTS Helper Menu)',\n      Function: null,\n      NextStage: 'ShizukuDialogGGTSHelperMenu',\n      Group: null,\n      Prerequisite: 'DialogShizukuGGTSIsGGTS()',\n      Result: '(You can do the required task with a single click.)',\n      Trait: null,\n    },\n    {\n      Stage: 'ShizukuDialogGGTSHelperMenu',\n      Option: '(Cheat: Auto Do Required Task)',\n      Function: 'DialogShizukuGGTSAutoDoRequiredTask()',\n      NextStage: '0',\n      Group: null,\n      Prerequisite: '!DialogShizukuGGTSEnabledAutoDoRequiredTask',\n      Result: '(Auto do required task enabled.)',\n      Trait: null,\n    },\n    {\n      Stage: 'ShizukuDialogGGTSHelperMenu',\n      Option: '(Cheat: Disable Auto Do Required Task)',\n      Function: 'DialogShizukuGGTSDisableAutoDoRequiredTask()',\n      NextStage: '0',\n      Group: null,\n      Prerequisite: 'DialogShizukuGGTSEnabledAutoDoRequiredTask',\n      Result: '(Auto do required task disabled.)',\n      Trait: null,\n    },\n    {\n      Stage: 'ShizukuDialogGGTSHelperMenu',\n      Option: '(Cheat: New Task without Waiting)',\n      Function: 'DialogShizukuGGTSDoRequiredTask()',\n      NextStage: '0',\n      Group: null,\n      Prerequisite: 'DialogShizukuGGTSNoCurrentTask()',\n      Result: null,\n      Trait: null,\n    },\n    {\n      Stage: 'ShizukuDialogGGTSHelperMenu',\n      Option: '(Cheat: Do Required Task)',\n      Function: 'DialogShizukuGGTSDoRequiredTask()',\n      NextStage: '0',\n      Group: null,\n      Prerequisite: 'DialogShizukuGGTSHasCurrentTask()',\n      Result: null,\n      Trait: null,\n    },\n    {\n      Stage: 'ShizukuDialogGGTSHelperMenu',\n      Option: '(Back to main menu.)',\n      Function: null,\n      NextStage: '0',\n      Group: null,\n      Prerequisite: null,\n      Result: '(Main menu.)',\n      Trait: null,\n    },\n  ]\n\n  window.DialogShizukuGGTSIsGGTS ??= isGGTS\n  window.DialogShizukuGGTSNoCurrentTask ??= function () {\n    return AsylumGGTSTask == null\n  }\n  window.DialogShizukuGGTSHasCurrentTask ??= function () {\n    return AsylumGGTSTask != null\n  }\n  window.DialogShizukuGGTSDoRequiredTask ??= ggtsDoRequired\n  window.DialogShizukuGGTSEnabledAutoDoRequiredTask ??= false\n  window.DialogShizukuGGTSAutoDoRequiredTask ??= function () {\n    window.DialogShizukuGGTSEnabledAutoDoRequiredTask = true\n  }\n  window.DialogShizukuGGTSDisableAutoDoRequiredTask ??= function () {\n    window.DialogShizukuGGTSEnabledAutoDoRequiredTask = false\n  }\n\n  const lastIndex = Player.Dialog.findIndex((dialog) => dialog.Stage === '0' && dialog.Function === 'DialogLeave()')\n  for (let i = 0; i < customDialog.length; i++) {\n    if (\n      Player.Dialog.some(\n        (dialog) =>\n          dialog.Stage == customDialog[i].Stage &&\n          dialog.Option === customDialog[i].Option &&\n          dialog.Function === customDialog[i].Function &&\n          dialog.NextStage === customDialog[i].NextStage &&\n          dialog.Group === customDialog[i].Group &&\n          dialog.Prerequisite === customDialog[i].Prerequisite &&\n          dialog.Result === customDialog[i].Result &&\n          dialog.Trait === customDialog[i].Trait,\n      )\n    )\n      continue\n    Player.Dialog.splice(lastIndex + i, 0, customDialog[i])\n  }\n}\n\nfunction init() {\n  modApi.hookFunction('DialogDraw', 10, (args, next) => {\n    if (!CharacterGetCurrent().IsPlayer()) return next(args)\n\n    addCustomDialogToPlayer()\n    return next(args)\n  })\n}\n\nlet initialClothes = {\n  Cloth: null as Asset | null,\n  ClothLower: null as Asset | null,\n}\n\nmodApi.hookFunction('AsylumGGTSLoad', 10, (args, next) => {\n  next(args)\n\n  // Save initial clothes\n  initialClothes = {\n    Cloth: Player.Appearance.find((item) => item.Asset.Group.Name === 'Cloth')?.Asset ?? null,\n    ClothLower: Player.Appearance.find((item) => item.Asset.Group.Name === 'ClothLower')?.Asset ?? null,\n  }\n})\n\n/**\n * There are some activities that require player has free legs.\n * So we try to release legs if they are restrained.\n */\nfunction tryReleaseLegs() {\n  if (!Player.IsRestrained()) return\n\n  // If there is a `KeepPose` rule, we should set active pose to `LegsClosed` before release player.\n  if (Player.Pose.includes('LegsClosed') && Player.Game?.GGTS?.Rule?.includes('KeepPose')) {\n    CharacterSetActivePose(Player, 'LegsClosed', true)\n  }\n\n  // Then release legs\n  const legs = ['ItemLegs', 'ItemFeet'] as const\n  legs.forEach((group) => {\n    const item = InventoryGet(Player, group)\n    if (item) {\n      InventoryRemove(Player, group)\n    }\n  })\n}\n\nfunction wearFuturisticRestraints(group: AssetGroupName, item: string) {\n  if (InventoryGet(Player, group) == null) {\n    InventoryWear(Player, item, group, '#202020', 0)\n  } else {\n    console.warn(`Cannot wear ${item} because ${group} is already worn.`)\n  }\n}\n\nfunction ggtsDoRequired() {\n  if (!isGGTS()) return\n  if (AsylumGGTSTask == null) {\n    AsylumGGTSNewTask()\n    return DialogLeave()\n  }\n\n  switch (AsylumGGTSTask) {\n    // Activities\n    case 'ActivityBite':\n    case 'ActivityCaress':\n    case 'ActivityHandGag':\n    case 'ActivityKiss':\n    case 'ActivityLick':\n    case 'ActivityMasturbateHand':\n    case 'ActivityNod':\n    case 'ActivityPet':\n    case 'ActivityPinch':\n    case 'ActivitySpank':\n    case 'ActivityTickle':\n    case 'ActivityWiggle':\n      {\n        tryReleaseLegs()\n\n        const activity = ActivityFemale3DCG.find((item) => item.Name === AsylumGGTSTask.substr(8))\n        const groups = (activity.TargetSelf === true ? activity.Target : activity.TargetSelf) ?? []\n        const allowedGroups = groups.filter((group) =>\n          ActivityCheckPrerequisites(\n            activity,\n            Player,\n            AsylumGGTSTaskTarget ?? Player,\n            AssetGroupGet('Female3DCG', group),\n          ),\n        )\n        if (!activity || allowedGroups.length == 0) {\n          ChatRoomSendLocal('Activity group not found: ' + activity)\n        }\n        const timer = setInterval(() => {\n          if (AsylumGGTSTask == null) {\n            clearInterval(timer)\n          }\n          // In some cases the activity is not possible, so we need to try again until we find a valid one\n          const Group = AssetGroupGet('Female3DCG', CommonRandomItemFromList(null, allowedGroups))\n          if (Group) {\n            ActivityRun(Player, AsylumGGTSTaskTarget ?? Player, Group, { Activity: activity }, true)\n          }\n        }, 1000)\n      }\n      break\n    // Poses\n    case 'PoseKneel':\n      tryReleaseLegs()\n      CharacterSetActivePose(Player, 'Kneel')\n      break\n    case 'PoseStand':\n      tryReleaseLegs()\n      CharacterSetActivePose(Player, 'BaseLower')\n      break\n    case 'PoseOverHead':\n      CharacterSetActivePose(Player, 'Yoked')\n      break\n    case 'PoseBehindBack':\n      CharacterSetActivePose(Player, 'BackCuffs')\n      break\n    case 'PoseLegsOpen':\n      tryReleaseLegs()\n      CharacterSetActivePose(Player, 'BaseLower')\n      break\n    case 'PoseLegsClosed':\n      tryReleaseLegs()\n      CharacterSetActivePose(Player, 'LegsClosed')\n      break\n    // Clothes\n    case 'ClothHeels':\n      InventoryWear(Player, 'Heels1', 'Shoes', '#72686F', 0)\n      break\n    case 'ClothSocks':\n      if (InventoryGet(Player, 'Socks') == null) {\n        InventoryWear(Player, 'Socks4', 'Socks', '#BCBCBC', 0)\n      }\n      if (InventoryGet(Player, 'Shoes') != null) {\n        InventoryRemove(Player, 'Shoes')\n      }\n      if (InventoryGet(Player, 'ItemBoots') != null) {\n        InventoryRemove(Player, 'ItemBoots')\n      }\n      break\n    case 'ClothBarefoot':\n      if (InventoryGet(Player, 'Socks') != null) {\n        InventoryRemove(Player, 'Socks')\n      }\n      if (InventoryGet(Player, 'Shoes') != null) {\n        InventoryRemove(Player, 'Shoes')\n      }\n      if (InventoryGet(Player, 'ItemBoots') != null) {\n        InventoryRemove(Player, 'ItemBoots')\n      }\n      break\n    case 'ClothUpperLowerOn':\n      if (InventoryGet(Player, 'Cloth') == null || InventoryGet(Player, 'ClothLower') == null) {\n        // 1. Set the initial clothes\n        if (initialClothes.Cloth == null && initialClothes.ClothLower == null) {\n          CharacterAppearanceSetItem(Player, 'Cloth', initialClothes.Cloth)\n          CharacterAppearanceSetItem(Player, 'ClothLower', initialClothes.ClothLower)\n        }\n      }\n\n      if (InventoryGet(Player, 'Cloth') == null || InventoryGet(Player, 'ClothLower') == null) {\n        // 2. Load the cloth from wardrobe\n        WardrobeFastLoad(Player, 0, false)\n      }\n\n      if (InventoryGet(Player, 'Cloth') == null || InventoryGet(Player, 'ClothLower') == null) {\n        // 3. Wear random clothes\n        InventoryWearRandom(Player, 'Cloth', 0, true, true)\n        InventoryWearRandom(Player, 'ClothLower', 0, true, true)\n      }\n      break\n    case 'ClothUpperLowerOff':\n      if (InventoryGet(Player, 'Cloth') != null) {\n        InventoryRemove(Player, 'Cloth')\n      }\n      if (InventoryGet(Player, 'ClothLower') != null) {\n        InventoryRemove(Player, 'ClothLower')\n      }\n      break\n    case 'ClothUnderwear':\n      if (CharacterIsNaked(Player) || !CharacterIsInUnderwear(Player)) {\n        CharacterNaked(Player)\n        InventoryWear(Player, 'Bra2', 'Bra', '#FFFFFF')\n        InventoryWear(Player, 'Panties7', 'Panties', '#DE21A7')\n      }\n      break\n    case 'ClothNaked':\n      CharacterNaked(Player)\n      break\n    case 'RestrainLegs':\n      // InventoryWearRandom(Player, 'ItemLegs', 0, true, true)\n      InventoryWear(Player, 'HempRope', 'ItemLegs', null, 100)\n      break\n\n    // Restraints\n    case 'ItemHandsFuturisticMittens':\n      wearFuturisticRestraints('ItemHands', 'FuturisticMittens')\n      break\n    case 'ItemHeadFuturisticMask':\n      wearFuturisticRestraints('ItemHead', 'FuturisticMask')\n      break\n    case 'ItemEarsFuturisticEarphones':\n      wearFuturisticRestraints('ItemEars', 'FuturisticEarphones')\n      break\n    case 'ItemNeckFuturisticCollar':\n      wearFuturisticRestraints('ItemNeck', 'FuturisticCollar')\n      break\n    case 'ItemArmsFuturisticArmbinder':\n      wearFuturisticRestraints('ItemArms', 'FuturisticArmbinder')\n      break\n    case 'ItemArmsFuturisticStraitjacket':\n      wearFuturisticRestraints('ItemArms', 'FuturisticStraitjacket')\n      break\n    case 'ItemArmsFuturisticCuffs':\n      wearFuturisticRestraints('ItemArms', 'FuturisticCuffs')\n      break\n    case 'ItemArmsFeetFuturisticCuffs':\n      wearFuturisticRestraints('ItemArms', 'FuturisticCuffs')\n      wearFuturisticRestraints('ItemLegs', 'FuturisticLegCuffs')\n      wearFuturisticRestraints('ItemFeet', 'FuturisticAnkleCuffs')\n      break\n    case 'ItemBootsFuturisticHeels':\n      wearFuturisticRestraints('ItemBoots', 'FuturisticHeels')\n      break\n    case 'ItemMouthFuturisticBallGag':\n      if (InventoryGet(Player, 'ItemMouth') == null) {\n        wearFuturisticRestraints('ItemMouth', 'FuturisticHarnessBallGag')\n      } else if (InventoryGet(Player, 'ItemMouth2') == null) {\n        wearFuturisticRestraints('ItemMouth2', 'FuturisticHarnessBallGag')\n      } else if (InventoryGet(Player, 'ItemMouth3') == null) {\n        wearFuturisticRestraints('ItemMouth3', 'FuturisticHarnessBallGag')\n      }\n      break\n    case 'ItemMouthFuturisticPanelGag':\n      if (InventoryGet(Player, 'ItemMouth') == null) {\n        wearFuturisticRestraints('ItemMouth', 'FuturisticHarnessPanelGag')\n      } else if (InventoryGet(Player, 'ItemMouth2') == null) {\n        wearFuturisticRestraints('ItemMouth2', 'FuturisticHarnessPanelGag')\n      } else if (InventoryGet(Player, 'ItemMouth3') == null) {\n        wearFuturisticRestraints('ItemMouth3', 'FuturisticHarnessPanelGag')\n      }\n      break\n    case 'ItemPelvisFuturisticChastityBelt':\n      wearFuturisticRestraints('ItemPelvis', 'FuturisticChastityBelt')\n      break\n    case 'ItemPelvisFuturisticTrainingBelt':\n      wearFuturisticRestraints('ItemPelvis', 'FuturisticTrainingBelt')\n      break\n    case 'ItemBreastFuturisticBra':\n      wearFuturisticRestraints('ItemBreast', 'FuturisticBra')\n      break\n    case 'ItemBreastFuturisticBra2':\n      wearFuturisticRestraints('ItemBreast', 'FuturisticBra2')\n      break\n    case 'ItemTorsoFuturisticHarness':\n      wearFuturisticRestraints('ItemTorso', 'FuturisticHarness')\n      break\n    // GGTS Auto Task, Just do NOTHING\n    case 'NoTalking':\n    case 'ItemPose':\n    case 'ItemRemoveLimb':\n    case 'ItemRemoveBody':\n    case 'ItemRemoveHead':\n    case 'ItemUngag':\n    case 'ItemChaste':\n    case 'ItemUnchaste':\n    case 'ItemIntensity':\n    case 'ItemEarsDeaf':\n    case 'ItemMaskBlind':\n    case 'ItemFuckMachineIntensity':\n    case 'ItemTransform':\n    case 'ItemChangeGag':\n    case 'ItemBeltToFuck':\n    case 'ItemFuckToBelt':\n    case 'NewRuleNoOrgasm':\n    case 'UndoRuleNoOrgasm':\n    case 'UndoRuleKeepPose':\n    case 'LockRoom':\n    case 'UnlockRoom':\n      break\n  }\n\n  if (AsylumGGTSTask?.startsWith('Query')) {\n    ggtsAutoSendChatMessage()\n  }\n\n  DialogLeave()\n}\n\nfunction ggtsAutoSendChatMessage() {\n  if (!AsylumGGTSTask) return\n  let msg = ''\n  const Level = AsylumGGTSGetLevel(Player)\n  switch (AsylumGGTSTask) {\n    case 'QueryWhatIsGGTS':\n      msg = 'Good Girl Training System'\n      break\n\n    case 'QueryWhatAreYou':\n      if (Level <= 4) msg = \"I'm a good girl.\"\n      else if (Level == 5) msg = \"I'm a good slave girl.\"\n      else if (Level >= 6) msg = \"I'm a good slave.\"\n      break\n    case 'QueryWhoControl':\n      msg = 'GGTS is in control.'\n      break\n    case 'QueryWhoControlMaster':\n      msg = 'Master GGTS is in control.'\n      break\n    case 'QueryLove':\n      msg = 'I love GGTS.'\n      break\n    case 'QueryLoveMaster':\n      msg = 'I love Master GGTS.'\n      break\n    case 'QueryCanFail':\n      msg = 'GGTS cannot fail.'\n      break\n    case 'QueryCanFailMaster':\n      msg = 'Master GGTS cannot fail.'\n      break\n    case 'QuerySurrender':\n      msg = 'I surrender to GGTS.'\n      break\n    case 'QuerySurrenderMaster':\n      msg = 'I surrender to Master GGTS.'\n      break\n    case 'QueryServeObey':\n      msg = 'I serve and obey GGTS.'\n      break\n    case 'QueryServeObeyMaster':\n      msg = 'I serve and obey Master GGTS.'\n      break\n    case 'QueryFreeWill':\n      msg = \"I don't have free will.\"\n      break\n    case 'QuerySlaveWorthy':\n      msg = 'I strive to be slave worthy.'\n      break\n\n    default:\n      console.log('Unknown query: ' + AsylumGGTSTask)\n      break\n  }\n\n  if (msg) {\n    const inputValue = document.getElementById('InputChat') as HTMLTextAreaElement\n    if (!inputValue) return\n    inputValue.value = msg\n    ChatRoomSendChat()\n  }\n}\n\n// modApi.hookFunction('CheatFactor', 10, (args, next) => {\n//   // enable double GGTS time cheat for private GGTS room.\n//   if (\n//     args[0] === 'DoubleGGTSTime' &&\n//     ChatRoomGame == 'GGTS' &&\n//     ChatRoomData.Private &&\n//     ChatSearchReturnToScreen == 'AsylumGGTS' &&\n//     ChatRoomCharacter.length <= 1\n//   ) {\n//     return args[1]\n//   }\n\n//   return next(args)\n// })\n\nmodApi.hookFunction('AsylumGGTSNewTask', 10, (args, next) => {\n  next(args)\n\n  // Notify user with browser notification\n  if (Notification.permission === 'granted') {\n    new Notification('New GGTS Task', {\n      body: AsylumGGTSTask,\n      icon: 'Icons/Logo.png',\n    })\n  } else if (Notification.permission !== 'denied') {\n    Notification.requestPermission().then((permission) => {\n      if (permission === 'granted') {\n        new Notification('New GGTS Task', {\n          body: AsylumGGTSTask,\n          icon: 'Icons/Logo.png',\n        })\n      }\n    })\n  }\n\n  if (window.DialogShizukuGGTSEnabledAutoDoRequiredTask) {\n    setTimeout(() => {\n      ggtsDoRequired()\n    }, 2000)\n  }\n})\n\ninit()\n","import './character/bondage'\nimport './rooms/asylum-ggts'\n",";(async () => {\n  if (window.MaikoScriptShizukuLoaded !== true) {\n    while (!window.bcModSdk) {\n      await new Promise((resolve) => setTimeout(resolve, 100))\n    }\n    window.MaikoScriptShizukuLoaded = true\n    console.log('Shizuku loaded')\n\n    await import('./entry')\n\n    while (ServerBeep?.Timer > CommonTime()) {\n      // This means the BCX extension is just loaded, we should wait for the message disapear.\n      await new Promise((resolve) => setTimeout(resolve, 1000))\n    }\n    ServerBeep = {\n      Message: `Shizuku Loaded, Version: ${await import('./hooks/native').then((m) => m.version)}`,\n      Timer: CommonTime() + 3000,\n    }\n  } else {\n    console.log('Shizuku already loaded')\n  }\n})()\n"],"mappings":"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","names":["native_exports","__export","native_default","version","init_native","__esmMin","addCustomDialogToPlayer","customDialog","lastIndex","dialog","i","init","native_default","args","next","_a","init_bondage","__esmMin","init_native","isGGTS","addCustomDialogToPlayer","_a","_b","_c","_d","_e","_f","_g","customDialog","ggtsDoRequired","lastIndex","dialog","init","native_default","args","next","tryReleaseLegs","group","wearFuturisticRestraints","item","activity","allowedGroups","timer","Group","initialClothes","ggtsAutoSendChatMessage","msg","Level","inputValue","init_asylum_ggts","__esmMin","init_native","permission","entry_exports","init_entry","__esmMin","init_bondage","init_asylum_ggts","resolve","m"]}